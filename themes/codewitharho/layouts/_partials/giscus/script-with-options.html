{{- $options := . }}
{{/* Merge the default options. */}}
{{- if and $options (ne $options site.Params.giscus) }}
  {{- $options = merge site.Params.giscus $options }}
{{- end }}
{{- with $options }}
  {{- $repo := .repo }}
  {{- $repoId := default .repo_id .repoId }}
  {{- $category := .category }}
  {{- $categoryId := default .category_id .categoryId }}
  <script
    src="https://giscus.app/client.js"
    data-repo="{{ $repo }}"
    data-repo-id="{{ $repoId }}"
    data-category="{{ $category }}"
    data-category-id="{{ $categoryId }}"
    data-mapping="pathname"
    data-strict="1"
    data-reactions-enabled="{{ cond .reactions "1" "0" }}"
    data-input-position="top"
    data-theme="{{ .theme }}"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    onload="document.body.dispatchEvent(new Event('giscus-load'))"
    async
  ></script>
{{- end -}}
